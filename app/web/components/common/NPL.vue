<template>
  <div class="npl">
    <div class="npl-banner">
      <img src="@/assets/nplImg/banner.jpg" alt="">
      <img class="npl-banner-button-1" src="@/assets/nplImg/Button-contestant.png" alt="">
      <img class="npl-banner-button-2" src="@/assets/nplImg/Button-download.png" alt="">
    </div>
    <div class="npl-center">
      <div class="npl-center-title">
        <span class="npl-center-title-left"></span>
        <span class="npl-center-title-text">简介</span>
        <span class="npl-center-title-right"></span>
      </div>
      <p class="npl-center-text">NPL大赛由<a href="#">KeepWork</a>举办推广，以NPL语言和Paracraft工具为基础，以游戏、动画、解谜为主题，每月举办一次。 参赛者使用Paracraft软件单人或组队完成一个游戏项目，项目评比在KeepWork网络评分系统中进行。
      </p>
      <div class="npl-center-title">
        <span class="npl-center-title-left"></span>
        <span class="npl-center-title-text">主题</span>
        <span class="npl-center-title-right"></span>
      </div>
      <div class="npl-center-theme">
        <div class="npl-center-theme-title">NPL大赛可以是游戏和动画、解谜三大类主题</div>
        <div class="npl-center-theme-text">
          <div class="npl-center-theme-text-box">
            <h2>游戏</h2>
            <p>游戏：必须是引导清晰（包含玩法介绍），体验完整和流畅的产品。参考4399.com</p>
          </div>
          <div class="npl-center-theme-text-box">
            <h2>动画</h2>
            <p>采用Paracraft电影方块制作，有清晰的故事逻辑，动画镜头清晰、播放流畅。</p>
          </div>
          <div class="npl-center-theme-text-box">
            <h2>解谜</h2>
            <p>解谜场景制作完善，解谜线索符合基本逻辑思维。制作中须包含不少于两处代码制作的机关。</p>
          </div>
        </div>
      </div>
      <div class="npl-center-title">
        <span class="npl-center-title-left"></span>
        <span class="npl-center-title-text">奖金</span>
        <span class="npl-center-title-right"></span>
      </div>
      <div class="npl-center-bonus">
        <div class="npl-center-bonus-box">
          <p>一等奖（1名）</p>
          <p>现金奖励3500元</p>
        </div>
        <div class="npl-center-bonus-box">
          <p>一等奖（2名）</p>
          <p>现金奖励2500元</p>
        </div>
        <div class="npl-center-bonus-box">
          <p>一等奖（4名）</p>
          <p>现金奖励1500元</p>
        </div>
        <div class="npl-center-bonus-box">
          <p>一等奖（1名）</p>
          <p>现金奖励500元</p>
        </div>
      </div>
      <div class="npl-center-title">
        <span class="npl-center-title-left"></span>
        <span class="npl-center-title-text">评比规则</span>
        <span class="npl-center-title-right"></span>
      </div>
      <div class="npl-center-points">
        <h4 class="npl-center-points-title">作品获奖资格标准</h4>
        <p class="npl-center-points-text"><span class="text-icon"></span>每个人可以同时提交多款作品参赛。</p>
        <p class="npl-center-points-text"><span class="text-icon"></span>本次未获奖作品，在修改完善后重新提交，可以参加下一届NPL大赛的评比。</p>
        <p class="npl-center-points-text"><span class="text-icon"></span>评选获奖作品需满足最低标准要求，当本次比赛提交的所有作品未达到对应奖项最低标准要求时，该奖项本次不进行评选。</p>
        <p class="npl-center-points-text"><span class="text-icon"></span>此前已获奖作品，包括但不限于获得PAC大赛、IICC大赛、NPL大赛奖项的作品不再参与评选（人气奖不受此条规则限制）。</p>
        <p class="npl-center-points-text"><span class="text-icon"></span>2018年10月10日前上传作品不再参与评选（原作品修改后不受此条限制）。</p>
        <p class="npl-center-points-text"><span class="text-icon"></span>NPL大赛评选规则最终解释权归活动举办方KeepWork所有。</p>

        <h4 class="npl-center-points-title">一二三等奖评比规则</h4>
        <h5 class="npl-center-points-subtitle"><span class="subtitle-icon"></span>最低标准要求：</h5>
        <p class="npl-center-points-prize">一等奖：游戏类参考作品：《BlockBot》；动画类参考作品：《呵护》；解谜类参考作品：《解救游戏》</p>
        <p class="npl-center-points-prize">二等奖：游戏类参考作品：《坦克大战》；动画类参考作品：《肇庆一中·记忆永存》；解谜类参考作品：《百货商店》</p>
        <p class="npl-center-points-prize">三等奖：游戏类参考作品：《道路通畅》；动画类参考作品：《悲伤的巴塞罗那》；解谜类参考作品: 《飞机奇遇记》</p>

        <h5 class="npl-center-points-subtitle"><span class="subtitle-icon"></span>评比方法：</h5>
        <p class="npl-center-points-prize">获奖作品须满足对应奖项最低标准要求。</p>
        <p class="npl-center-points-prize">根据评分系统得分进行排序评选。</p>
        <p class="npl-center-points-prize">评分评委为所有拥有自己作品的KeepWork注册用户，评委分为主动评分类型及被动系统邀请类型。</p>
        <p class="npl-center-points-prize">每个评委可对提交的每一个作品进行一次评分。</p>
        <p class="npl-center-points-prize">每个作品在每届NPL大赛截至日期之前都可进行评委评分。</p>

        <h4 class="npl-center-points-title">人气奖评比规则</h4>
        <h5 class="npl-center-points-subtitle"><span class="subtitle-icon"></span>最低标准要求：</h5>
        <p class="npl-center-points-prize">完整的作品，可以正常浏览。必须是游戏、动画、解谜三大类主题中的某一类</p>

        <h5 class="npl-center-points-subtitle"><span class="subtitle-icon"></span>评比方法：</h5>
        <p class="npl-center-points-prize">根据评分系统中为该作品评分的评委人数来进行排序评选，评委人数最多的作品获得该奖项。</p>
        <p class="npl-center-points-prize">评分评委为所有拥有自己作品的KeepWork注册用户，评委分为主动评分类型及被动系统邀请类型。</p>
        <p class="npl-center-points-prize">每个评委可对提交的每一个作品进行一次评分。</p>
        <p class="npl-center-points-prize">每个作品在每届NPL大赛截至日期之前都可进行评委评分。</p>
      </div>
      <div class="npl-center-title">
        <span class="npl-center-title-left"></span>
        <span class="npl-center-title-text">日程</span>
        <span class="npl-center-title-right"></span>
      </div>
      <div class="npl-center-going">
        <p class="npl-center-going-date">2019年2月NPL大赛截止日期2月25日</p>
        <p class="npl-center-going-hint"><img class="npl-center-going-hint-flame" src="@/assets/nplImg/flame.png">进行中</p>
      </div>
      <div class="npl-center-end">
        <p class="npl-center-end-date">2019年1月NPL大赛截至日期1月15日（已截止）</p>
        <p class="npl-center-end-hint">点击查看<a href="#"> &lt;获奖作品&gt; </a></p>
      </div>
    </div>
    <div class="npl-competition">
      <div class="npl-competition-showcase">
        <div class="npl-center-title">
          <span class="npl-center-title-left"></span>
          <span class="npl-center-title-text">本期参赛作品</span>
          <span class="npl-center-title-right"></span>
        </div>
        <el-row>
          <el-col :sm="12" :md="6" :xs="12" v-for="(project,index) in rankingList" :key="index">
            <project-cell :project="project" :ranking='true' :level="index"></project-cell>
          </el-col>
        </el-row>
      </div>
    </div>
  </div>
</template>
<script>
import ProjectCell from './ProjectCell'
import { mapActions, mapGetters } from 'vuex'
import _ from 'lodash'

export default {
  name: 'NPL',
  data() {
    return {}
  },
  async mounted() {
    await this.getGamesList()
    let gameId
    for (let i = 0; i < this.gamesList.rows.length; i++) {
      if (this.gamesList.rows[i].state === 0) {
        gameId = _.get(this.gamesList.rows[i], 'id', 0)
        break
      }
    }
    await this.getWorksByGameId({ gameId })
  },
  computed: {
    ...mapGetters({
      gamesList: 'pbl/gamesList',
      gameWorks: 'pbl/gameWorks'
    }),
    rankingList() {
      let list = _.get(this.gameWorks, 'rows', [])
      let works = []
      _.forEach(list, i => { works.push(i.projects) } )
      return works
    }
  },
  methods: {
    ...mapActions({
      getGamesList: 'pbl/getGamesList',
      getWorksByGameId: 'pbl/getWorksByGameId'
    })
  },
  components: {
    ProjectCell
  }
}
</script>

<style lang="scss" scoped>
.npl {
  background: #fff;
  &-banner {
    text-align: center;
    position: relative;
    &-button-1 {
      position: absolute;
      bottom: 20px;
      left: 35%;
    }
    &-button-2 {
      position: absolute;
      bottom: 20px;
      right: 35%;
    }
  }
  &-center {
    max-width: 1200px;
    margin: 0 auto;
    &-title {
      text-align: center;
      display: flex;
      color: #0061e5;
      font-size: 36px;
      justify-content: center;
      align-items: center;
      &-text {
        margin: 45px;
      }
      &-left {
        display: inline-block;
        height: 4px;
        width: 36px;
        background: #0061e5;
        position: relative;
        &::before {
          content: '';
          height: 10px;
          width: 10px;
          background: #0061e5;
          position: absolute;
          right: -10px;
          top: -3px;
          transform: rotate(-45deg);
        }
      }
      &-right {
        display: inline-block;
        height: 4px;
        width: 36px;
        background: #0061e5;
        position: relative;
        &::before {
          content: '';
          height: 10px;
          width: 10px;
          background: #0061e5;
          position: absolute;
          left: -10px;
          top: -3px;
          transform: rotate(-45deg);
        }
      }
    }
    &-text {
      text-align: center;
      margin: 0 100px 110px;
      font-size: 18px;
      line-height: 42px;
      color: #333333;
      a {
        text-decoration: none;
      }
    }
    &-theme {
      background: url(../../assets/nplImg/text-bg.png);
      height: 327px;
      margin-bottom: 110px;
      &-title {
        text-align: center;
        padding: 80px 0 60px 0;
        font-size: 22px;
        line-height: 20px;
        color: #0676bd;
      }
      &-text {
        display: flex;
        &-box {
          flex: 1;
          margin: 0 60px;
          padding-bottom: 110px;
        }
      }
    }
    &-bonus {
      display: flex;
      margin-bottom: 110px;
      &-box {
        flex: 1;
        text-align: center;
        color: #ff7800;
        line-height: 47px;
        font-size: 28px;
        font-weight: 700;
      }
    }
    &-points {
      margin-bottom: 110px;
      &-title {
        font-size: 28px;
        color: #333;
        margin: 68px 0 40px;
      }
      &-subtitle {
        font-size: 18px;
        color: #2561ba;
        .subtitle-icon {
          display: inline-block;
          width: 13px;
          height: 13px;
          border-radius: 50%;
          background: linear-gradient(to right, #0061e5, #fff);
          margin-right: 15px;
        }
      }
      &-text {
        .text-icon {
          display: inline-block;
          height: 10px;
          width: 10px;
          background: #0061e5;
          transform: rotate(-45deg);
          margin-right: 17px;
        }
      }
      &-prize {
        padding-left: 28px;
      }
    }
    &-going {
      max-width: 1010px;
      min-height: 198px;
      margin: 0 auto;
      text-align: center;
      background: url(../../assets/nplImg/going-bg.png);
      color: #fff;
      &-date {
        padding-top: 78px;
        font-size: 24px;
      }
      &-hint {
        display: flex;
        justify-content: center;
        align-items: center;
        &-flame {
          margin-right: 22px;
        }
      }
    }
    &-end {
      max-width: 1010px;
      min-height: 182px;
      border: 2px solid #0061e5;
      box-sizing: border-box;
      background: #eaf5ff;
      margin: 92px auto;
      text-align: center;
      padding-top: 30px;
      font-size: 24px;
      color: #333;
      &-hint {
        font-size: 18px;
      }
    }
  }
  &-competition {
    background: #f6f7f8;
    padding: 100px;
    &-showcase {
      max-width: 1200px;
      margin: 0 auto;
    }
  }
}
</style>

